# LLM Abstraction Layer

Welcome to this personal project of mine! This repository is dedicated to creating an abstraction layer designed specifically for Large Language Models (LLMs). The goal of this project is to simplify the integration and utilization of various LLM APIs, such as OpenAI and Anthropic, enabling developers to seamlessly switch between them with minimal effort.

## Project Overview

In the rapidly evolving field of AI and natural language processing, developers often face the challenge of adapting their code to accommodate different LLM APIs. This project addresses that challenge by providing a unified interface that abstracts the underlying complexities.

With this abstraction layer, developers can:

- Easily Switch Between LLMs: The framework allows you to switch between different LLM providers without needing to rewrite your code. Whether you want to test responses from OpenAI or Anthropic, you can do so effortlessly.
- Reuse Prompts Across APIs: By standardizing the way prompts are structured and sent, you can reuse your prompts across different LLMs. This promotes consistency and saves time during development.
- Focus on Output Quality: Instead of spending valuable time modifying your code for different APIs, you can concentrate on optimizing the prompts and improving the quality of outputs generated by the models.

## Usage

### 1. Creating a ChatGenerator Instance

Create a `ChatGeneratorSettings` object:

```typescript
const settings: ChatGeneratorSettings = {
  max_tokens: 100,
  messages: [{ role: "user", content: "Hello, AI!" }],
  system: "You are a helpful assistant.",
  temperature: 0.7,
  stop_token: ["\n"],
  presence_penalty: 0.5,
  frequency_penalty: 0.5,
  tools: [
    {
      name: "get_unit",
      description: "Retrieve the unit of a grocery product",
      schema: {
        type: "object",
        properties: {
          unit: { type: "string", description: "The unit of item" },
        },
      },
    },
  ],
};

const generator = new ChatGenerator(settings);
```

### 2. Generating a Response

```typescript
const response = await generator.generate("claude-3-haiku-20240307");
// OR
const response = await generator.generate("gpt-4o-2024-08-06");
```

The method will handle all the API calls, message formatting, and integration with the model-specific features behind the scenes.

### 3. Advanced Usage with Tools

The `ChatGenerator` also supports the integration of tools or functions. You can define custom `tools` and provide them as part of the tools array in `ChatGeneratorSettings`.

```typescript
const settings: ChatGeneratorSettings = {
  max_tokens: 100,
  messages: [{ role: "user", content: "What is the unit of a Kit Kat bar?" }],
  system:
    "You are a grocery assistant. Return the unit of a given product in JSON format.",
  tools: [
    {
      name: "get_unit",
      description: "Get the unit of a grocery product",
      schema: {
        type: "object",
        properties: {
          unit: { type: "string", description: "The unit of the product" },
        },
      },
    },
  ],
};

const generator = new ChatGenerator(settings);
const response = await generator.generate("claude-3-haiku-20240307");
```

Note: When using JSON format such as `json_object` or `json_schema`, you must also instruct the model to produce JSON yourself via a `system` or `user` message. Without this, the model may generate an unending stream of whitespace until the generation reaches the token limit, resulting in a long-running and seemingly "stuck" request.

### Simple Code Example

```typescript
import { ChatGeneratorSettings, ChatGenerator } from "./impl/chatGenerator";

async function main() {
  const settings: ChatGeneratorSettings = {
    max_tokens: 150,
    messages: [{ role: "user", content: "Categorize: Kit Kat" }],
    system: "You are a grocery assistant categorizing products for e-commerce.",
    temperature: 0.7,
  };

  const generator = new ChatGenerator(settings);

  try {
    const response = await generator.generate("gpt-4o-2024-08-06");
    console.log(response);
  } catch (error) {
    console.error(error);
  }
}

main();
```

### Notes

Ensure you have the necessary API keys set up for Anthropic and/or OpenAI.
